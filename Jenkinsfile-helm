String[] folderList

pipeline {
    environment {
        folders
        helm_back_1="back service 1"
        helm_front="front service"
    }
    agent any

    stages {
        stage('HELM CHARTS TO BE UPDATED') {
            steps {
                script {
                    String folders = sh(returnStdout: true, script: "git show | grep -o b/.*/ | cut -d / -f2 | uniq | tr '\n' ' '")
                    folderList = folders.split(" ");
                }
            }
        }

        stage('INVOKING PIPELINES') {
            steps {
                script {
                    folderList.each { folder ->
                        build job: "${${folder}}"
                    }
                }
            }
        }
      
    }
}
