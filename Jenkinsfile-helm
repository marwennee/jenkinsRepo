def FOLDERS

pipeline {
    environment {
        helm_back_1="back service 1"
        helm_front="front service"
    }
    agent any

    stages {
        stage('HELM CHARTS TO BE UPDATED') {
            steps {
                script {
                    FOLDERS = sh(returnStdout: true, script: "git show | grep -o b/.*/ | cut -d / -f2 | uniq | tr '\n' ' '").trim()
                }
            }
        }

        stage('INVOKING PIPELINES') {
            steps {
                script {
                    folderList = FOLDERS.split(" ");
                    folderList.each { folder ->
                    sh """
                        folder=${folder}
                        echo ${!folder}
                    """
                    }
                }
            }
        }
      
    }
}
